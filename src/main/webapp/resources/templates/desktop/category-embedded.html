<!-- Product count by categories -->
<!-- input: model:{categoryParents, productCountByCategories} -->
<div>
<!-- 	<br><span><strong>Products by Category</strong></span> -->
<% 	if ( model.productCountByCategories && (model.productCountByCategories.length>0) 
		&& model.categoryParents && (model.categoryParents.length>0) ){
		<!-- // each parent category -->
		_.each( model.categoryParents, function(parent){	%>
			<strong><%=parent%></strong>
<%			_.each( model.productCountByCategories, function (productCountByCategory) {		
				var parentIndex = (productCountByCategory.categoryPath.length-1);
				<!-- // if this category belong to current  parent category then display -->
				if ( productCountByCategory.categoryPath[parentIndex] == parent ) {		%>
					<a class="categoryPath" data-category-id="<%=productCountByCategory.categoryId%>" data-category-name="<%=productCountByCategory.categoryName%>" > <%=productCountByCategory.categoryName%></a>
					(<%=productCountByCategory.productCount%>)
					<br>
<%				}
			});		
		})
	} else {	%>
<!-- 		<br><span>Not found</span> -->
<%	}	%>
</div>
<!-- end of Product count by categories -->	
